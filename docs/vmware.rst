***********************
VMWare support for koan
***********************

One goal of Cobbler is to abstract out all your installation types. Basically the idea is create a profile one, use it
for PXE, reinstallations (``--replace-self``) and virtualized machines all at once.

Installing
##########

To get this working, you will need to be using Cobbler to host your PXE infrastructure.

You can then, using special Koan syntax (one single command line invocation), install a Cobbler profile /inside/ VMware,
pulling the RAM and Disk storage parameters from Cobbler.

This allows you to treat VMware just as another installation type... The same kickstart and parameters you use to
install inside your bare metal machines and other virtualization types can be used for VMware in very similar ways.

Setup
#####

First, grab yourself some caffeine.

Second, set up VMware as normal. (As of the time of writing this, we support VMware server and workstation, and there is
a patch being worked on to support nearly all VMware variants)

- Install the latest VMware server.  At the time of testing, I managed to get VMware to work on EL 5.
- Install the latest any-any patch to make VMware actually work on said platform
- run /usr/bin/vmware-config.pl as appropriate
- enter your free serial number when requested
- make sure the VMware service is enabled and started

Then do some minimal cobbler setup:

- add cobbler profiles and cobbler system records to taste
- cobbler must be set up to be your PXE infrastructure, which it should be doing already hopefully
- "cobbler system add" a new system and specify a mac address in the range of 00:50:56:00:00:00 to 00:50:56:3F:FF:FF
  (VMWare's allowed range).

Note that MAC addresses outside that range will not work, and you cannot skip the step of creating them in that range.
Unlike Xen/KVM they are also not auto-generated by Koan... The reason for this is, without the mapping in Cobbler, PXE
control over what profile is installed is meaningless.

Then, on the guest OS, run the following:

.. code-block:: shell

    koan --server=cobbler.example.org --system=foosball --virt --virt-type=vmware

What Happens
############

Koan will ask cobbler for the RAM and Disk needs associated with "foosball", or rather, the profile associated with
"foosball". It will then automatically create your VMware configuration file (vmx) and disk image, and set that image up
so that the rest of the installation happens over PXE.

Thus the installation is in tandem between PXE and the VMware libraries, though all of the profile data is still managed
by cobbler.
